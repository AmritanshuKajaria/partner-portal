<app-breadcrumb></app-breadcrumb>

<div class="notification-preferences-section">
  <app-section-header
    [header]="'Notification Preferences'"
  ></app-section-header>

  <div class="body-section">
    <form [formGroup]="notificationForm">
      <div
        nz-row
        class="notification"
        *ngFor="let data of listOfNotification; let i = index"
      >
        <div
          nz-col
          class="gutter-row notification-label"
          [nzXl]="10"
          [nzXs]="24"
        >
          {{ i + 1 + ". " + data?.label }}
        </div>
        <div
          style="padding-left: 1%"
          nz-col
          class="gutter-row"
          [nzXl]="12"
          [nzXs]="24"
          [formArrayName]="formArrayName[i]"
        >
          <nz-form-label [nzFor]="formArrayName[i]">Email List</nz-form-label>
          <div *ngFor="let email of data.formArray.controls; let no = index">
            <div [formGroupName]="no">
              <nz-form-item>
                <nz-form-control
                  nzErrorTip="Email is required!"
                  style="width: 80%"
                >
                  <nz-input-group>
                    <input
                      type="text"
                      nz-input
                      placeholder="Enter Email"
                      formControlName="email"
                    />
                  </nz-input-group>
                </nz-form-control>
                <a
                  *ngIf="no === data.formArray.controls.length - 1"
                  style="background: #00c13b"
                  (click)="addNotification(i + 1)"
                >
                  +
                </a>
                <a
                  *ngIf="no !== data.formArray.controls.length - 1"
                  style="background: #f41e2c"
                  (click)="removeNotification(no, i + 1)"
                >
                  -
                </a>
              </nz-form-item>
            </div>
          </div>
        </div>
      </div>
      <div nz-row>
        <div nz-col [nzXs]="24">
          <button
            nz-button
            class="action-button"
            style="height: 35px"
            [nzType]="'primary'"
          >
            <span nz-icon nzType="file-text" nzTheme="outline"></span> Save
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
