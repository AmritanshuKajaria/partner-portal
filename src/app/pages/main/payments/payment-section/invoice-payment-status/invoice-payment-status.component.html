<div class="invoice-payment-status-section">
  <div class="filter-section">
    <form [formGroup]="filterForm">
      <nz-form-item>
        <nz-form-control>
          <nz-input-group>
            <div class="editor-tag" (click)="focusTagInput()">
              <span class="tag-item" *ngFor="let tag of tags">
                {{ tag }}
                <span class="remove-tag" (click)="removeTag(tag)">Ã—</span>
              </span>
              <input
                placeholder="Add Invoice/ PO Number"
                #tagInput
                type="text"
                class="input-tag"
                (keyup)="onKeyUp($event)"
                formControlName="filter"
              />
            </div>
          </nz-input-group>
        </nz-form-control>
      </nz-form-item>
      <span style="font-weight: 500">
        Note : Press enter/ backspace to add multiple values
      </span>
    </form>

    <button
      nz-button
      nzType="primary"
      style="margin-top: 0px; margin-left: 4px"
      class="action-button"
      [disabled]="!tags.length"
      (click)="onSubmit()"
    >
      <span
        *ngIf="submitButtonLoading"
        style="color: white; font-size: 16px"
        nz-icon
        nzType="loading"
      ></span>
      Submit
    </button>
  </div>

  <div
    *ngIf="
      transactionViewDataList.length && tags.length && !submitButtonLoading
    "
  >
    <app-date-range
      (export)="isExportVisible = true"
      [showFilter]="false"
      [badgeTotal]="badgeTotal"
      (searchChange)="searchDataChanges($event)"
    ></app-date-range>

    <app-payment-table
      [listOfData]="transactionViewDataList"
      [total]="total"
      [pageSize]="pageSize"
      [pageIndex]="pageIndex"
      [isLoading]="isLoading"
      [tabName]="'Transaction View'"
      (pageIndexChange)="onPageIndexChange($event)"
    ></app-payment-table>
  </div>

  <nz-modal
    [(nzVisible)]="isExportVisible"
    nzTitle="Which paymets would you like to export?"
    (nzOnCancel)="isExportVisible = false"
  >
    <ng-container *nzModalContent>
      <app-export-model
        [exportType]="false"
        [sectionName]="'payments'"
        [description]="
          'Your paymets will be exported as a CSV file and sent to your email.'
        "
        [noOfFilter]="total"
        (close)="isExportVisible = false"
      ></app-export-model>
    </ng-container>
  </nz-modal>
</div>
