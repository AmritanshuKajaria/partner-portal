<div class="map-handling-section">
  <div class="section-header">
    <div class="tab-header">
      <span>ORDER PROCESSING & RETURN</span>
      <button
        nz-button
        nzType="default"
        class="reset-button"
        (click)="goBack()"
      >
        <span nz-icon nzType="arrow-left" nzTheme="outline"></span> Back
      </button>
    </div>
  </div>

  <div class="body-section" style="margin-left: 0; margin-right: 0">
    <form [formGroup]="inventoryFeedForm">
      <nz-form-item>
        <nz-form-label>PO Method</nz-form-label>
        <nz-form-control>
          <nz-input-group>
            <nz-radio-group formControlName="inventoryFeedType">
              <label
                *ngFor="let option of dropDownList?.poSendingMethod"
                nz-radio
                [nzValue]="option?.value"
                >{{ option?.name }}</label
              >
            </nz-radio-group>
          </nz-input-group>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label>Is Packing Slip Enabled</nz-form-label>
        <nz-form-control>
          <nz-input-group>
            <nz-switch formControlName="isPackingSlipEnabled"></nz-switch>
          </nz-input-group>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label>Enabled Carriers</nz-form-label>
        <nz-form-control>
          <nz-input-group>
            <nz-select
              nzPlaceHolder="Select A Inventory Schedule"
              formControlName="enabledCarriers"
              nzMode="multiple"
            >
              <nz-option
                *ngFor="let option of enabledCarriersOptions"
                [nzLabel]="option.name"
                [nzValue]="option.value"
              ></nz-option>
            </nz-select>
          </nz-input-group>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label
          >Label Page Size <span style="color: red">*</span></nz-form-label
        >
        <nz-form-control>
          <nz-input-group>
            <nz-radio-group formControlName="labelPageSize">
              <label
                *ngFor="let option of dropDownList?.labelPageSize"
                nz-radio
                [nzValue]="option?.value"
                >{{ option?.name }}</label
              >
            </nz-radio-group>
          </nz-input-group>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label>Send Copy Of PO Over Email</nz-form-label>
        <nz-form-control>
          <nz-input-group>
            <nz-switch formControlName="copyOfPOSentOverEmail"></nz-switch>
          </nz-input-group>
        </nz-form-control>
      </nz-form-item>

      <div
        *ngIf="formFieldOnUI?.authorizedFeedSenders"
        formArrayName="authorizedFeedSenders"
      >
        <div
          *ngFor="let email of authorizedFeedSenders.controls; let i = index"
        >
          <div [formGroupName]="i">
            <nz-form-item>
              <nz-form-label style="width: 301px" nzFor="brand" *ngIf="i === 0">
                Authorized Feed Sender<span style="color: red; font-weight: 500"
                  >*</span
                >
              </nz-form-label>
              <div style="width: 301px" *ngIf="i !== 0"></div>
              <nz-form-control [nzErrorTip]="emailError">
                <nz-input-group>
                  <input
                    formControlName="email"
                    type="text"
                    nz-input
                    placeholder="Enter Email"
                  />
                  <ng-template #emailError let-control>
                    <ng-container *ngIf="control.hasError('required')"
                      >Please input your email</ng-container
                    >
                  </ng-template>
                </nz-input-group>
              </nz-form-control>
              <div style="margin-top: 6px">
                <button
                  [disabled]="i >= 9"
                  nz-button
                  nzType="primary"
                  nzShape="circle"
                  *ngIf="i === authorizedFeedSenders.controls.length - 1"
                  style="
                    background: #00c13b !important;
                    margin-left: 8px;
                    border: 0;
                  "
                  (click)="addAuthorizedFeedSender()"
                  nzSize="small"
                >
                  <span nz-icon nzType="plus"></span>
                </button>
                <button
                  nz-button
                  nzType="primary"
                  nzShape="circle"
                  *ngIf="i !== authorizedFeedSenders.controls.length - 1"
                  style="
                    background: #f41e2c !important;
                    margin-left: 8px;
                    border: 0;
                  "
                  (click)="removeAuthorizedFeedSender(i)"
                  nzSize="small"
                >
                  <span nz-icon nzType="minus"></span>
                </button>
              </div>
            </nz-form-item>
          </div>
        </div>
      </div>
    </form>
    <div class="footer-section">
      <button nz-button nzType="default" class="reset-button" (click)="reset()">
        <span nz-icon nzType="reload" nzTheme="outline"></span> Reset
      </button>
      <button
        nz-button
        style="margin-top: 0"
        class="action-button"
        [nzType]="'primary'"
        (click)="submitForm()"
      >
        <span
          *ngIf="isLoading"
          style="color: white; font-size: 16px"
          nz-icon
          nzType="loading"
        ></span>
        <span
          *ngIf="!isLoading"
          nz-icon
          nzType="file-text"
          nzTheme="outline"
        ></span>
        Save
      </button>
    </div>
  </div>
</div>
