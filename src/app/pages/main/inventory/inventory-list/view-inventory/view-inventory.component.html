<app-breadcrumb></app-breadcrumb>

<div class="view-inventory-section">
  <app-section-header [header]="'Inventory Feed Details'"></app-section-header>

  <nz-spin [nzSpinning]="isLoading" nzTip="Loading...">
    <div class="body-section">
      <div nz-row [nzGutter]="16" class="header-section">
        <div
          nz-col
          class="gutter-row"
          [nzSm]="24"
          [nzXl]="12"
          class="left-section"
        >
          <span *ngIf="feedResult.toLocaleLowerCase() === 'processed'"
            ><b>Feed Code : </b>{{ editData.requested_feed_code }}</span
          >
          <span
            ><b>Date (EST) : </b
            >{{
              editData.feed_process_time | date : "dd-MM-yyyy HH:MM a"
            }}</span
          >
          <span><b>Feed Method : </b>{{ editData.feed_method }}</span>
          <span><b>Feed Status : </b>{{ editData.feed_method }}</span>
          <span *ngIf="feedResult.toLocaleLowerCase() === 'processed'"
            ><b>Total Products : </b>{{ total }}</span
          >
        </div>
        <div
          nz-col
          class="gutter-row"
          [nzSm]="24"
          [nzXl]="12"
          class="right-section"
        >
          <span
            ><a [href]="editData.raw_file_url" class="link"
              >download raw file</a
            ></span
          >
          <span
            ><a [href]="editData.processed_file_url" class="link"
              >download processed file</a
            ></span
          >
        </div>
      </div>
      <div *ngIf="feedResult.toLocaleLowerCase() === 'processed'">
        <nz-table
          style="margin-top: 20px"
          #nzTable
          nzOuterBordered
          [nzData]="inventoryFeedUpdate"
          [nzFrontPagination]="false"
          [nzShowPagination]="false"
        >
          <thead>
            <tr>
              <th style="width: 60%">Active</th>
              <th>In Stock</th>
              <th>Out of Stock</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            <ng-template ngFor let-data [ngForOf]="inventoryFeedUpdate">
              <tr>
                <td>{{ data?.name }}</td>
                <td>
                  <b>{{ data?.in_stock ? data?.in_stock : 0 }}</b>
                </td>
                <td>
                  <b>{{ data?.out_stock ? data?.out_stock : 0 }}</b>
                </td>
                <td>
                  <b>{{ data.total }}</b>
                </td>
              </tr>
            </ng-template>
            <tr>
              <td><b>Total</b></td>
              <td>
                <b>{{ totalInStock }}</b>
              </td>
              <td>
                <b>{{ totalOutStock }}</b>
              </td>
              <td>
                <b>{{ total }}</b>
              </td>
            </tr>
          </tbody>
        </nz-table>
      </div>
    </div>
  </nz-spin>
</div>
