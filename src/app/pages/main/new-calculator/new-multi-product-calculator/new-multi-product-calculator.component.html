<div class="multi-product-calculator">
  <div class="multi-product-calculator-section-content">
    <div class="action">
      <div style="display: flex">
        <button
          style="margin-right: 10px"
          nz-button
          nzType="primary"
          nzShape="round"
        >
          <span nz-icon nzType="upload" nzTheme="outline"></span> Export
        </button>

        <form nz-form>
          <nz-form-item style="margin-bottom: 0 !important">
            <nz-form-control nzErrorTip="Please input your valid code!">
              <nz-input-group nzPrefixIcon="search" class="search">
                <input
                  nz-input
                  placeholder="Search..."
                />
              </nz-input-group>
            </nz-form-control>
          </nz-form-item>
        </form>
      </div>
    </div>
    <nz-table
      #nzTable
      nzOuterBordered
      [nzData]="multiProductList"
      nzShowSizeChanger
      [nzPageSizeOptions]="pageSizeOptions"
      [nzTotal]="total"
      [nzShowTotal]="totalTemplate"
      [nzPageSize]="pageSize"
      [nzPageIndex]="pageIndex"
      [nzLoading]="isLoading"
      [nzScroll]="{ x: '100%' }"
    >
      <thead>
        <tr>
          <th *ngFor="let header of header">{{ header }}</th>
          <th nzRight class="action-column"><div>Actions</div></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of nzTable.data; let no = index">
          <td>
            <div nz-col>
              <a
                class="link"
                [routerLink]="'/main/products/details/' + data?.sku"
                >{{ data?.mpn }}</a
              >
              <div style="padding-top: 8px">{{ data?.productName }}</div>
            </div>
          </td>
          <td>
            <div nz-col>
              <app-asin [asin]="data.asin"></app-asin>
              <div style="padding-top: 8px">{{ data?.upc }}</div>
            </div>
          </td>
          <td>
            <nz-form-item style="margin-bottom: 0; width: 150px">
              <nz-form-control>
                <nz-input-group nzPrefix="$">
                  <input
                    [value]="data?.unitPrice"
                    [(ngModel)]="data.unitPrice"
                    (input)="changePrice($event, 'unit', no)"
                    nz-input
                    type="number"
                    placeholder="Unit"
                  />
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </td>
          <td class="text-wrap">
            <span>
              {{
                data?.amazonSalesCommission
                  ? "$" + estimatedPrices[no].amazonSalesCommission
                  : ""
              }}</span
            >
            <span>{{
              data?.amazonSalesCommission
                ? " (" + data?.amazonSalesCommission + "%" + ")"
                : ""
            }}</span>
          </td>
          <td>
            <div
              nz-col
              style="display: flex; flex-direction: column; align-items: center"
            >
              <div>{{ data?.shippingCost | currency }}</div>
              <div class="text-wrap">Boxes: {{ data?.boxes }}</div>
              <div class="text-wrap">Size Tier: {{ data?.sizeTier }}</div>
            </div>
          </td>
          <td class="text-wrap">
            <span>
              {{
                data?.orderProcessingFee
                  ? "$" + estimatedPrices[no].orderProcessingFee
                  : ""
              }}</span
            >
            <span>{{
              data?.orderProcessingFee
                ? " (" + data?.orderProcessingFee + "%" + ")"
                : ""
            }}</span>
          </td>
          <td class="text-wrap">
            <span>
              {{
                data?.returnProcessingFee
                  ? "$" + estimatedPrices[no].returnProcessingFee
                  : ""
              }}</span
            >
            <span>{{
              data?.returnProcessingFee
                ? " (" + data?.returnProcessingFee + "%" + ")"
                : ""
            }}</span>
          </td>
          <td>
            <nz-form-item style="margin-bottom: 0; width: 150px">
              <nz-form-control>
                <nz-input-group nzPrefix="$">
                  <input
                    [value]="data?.retailPrice"
                    [(ngModel)]="data.retailPrice"
                    (input)="changePrice($event, 'retail', no)"
                    nz-input
                    type="number"
                    placeholder="Retail"
                  />
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </td>
          <td nzRight>
            <div style="display: flex; align-items: center">
              <a
                style="margin: 0 5px; color: #2121c3; font-size: large"
                nz-tooltip
                nzTooltipTitle="Save"
              >
                <span nz-icon nzType="save" nzTheme="outline"></span>
              </a>
              <a
                style="margin: 0 5px; color: #2121c3; font-size: large"
                nz-tooltip
                nzTooltipTitle="Reset"
                (click)="resetData(no)"
              >
                <span nz-icon nzType="reload" nzTheme="outline"></span>
              </a>
            </div>
            <!-- <button
              nz-button
              nzType="primary"
              class="action-button"
              style="margin-top: 0; height: 35px"
              (click)="matchValue(data.mpn, data.handling_time)"
            >
              Edit Handling Time
            </button> -->
          </td>
        </tr>
      </tbody>
    </nz-table>
  </div>

  <ng-template #totalTemplate let-total
    >Total <b>{{ total }}</b> items</ng-template
  >
</div>
